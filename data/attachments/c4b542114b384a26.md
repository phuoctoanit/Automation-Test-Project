# Test info

- Name: Employer API Tests >> should update an existing employer
- Location: /home/runner/work/Automation-Test-Project/Automation-Test-Project/tests/api/employer-api.spec.ts:37:9

# Error details

```
Error: expect(received).toBe(expected) // Object.is equality

Expected: 200
Received: 403
    at /home/runner/work/Automation-Test-Project/Automation-Test-Project/tests/api/employer-api.spec.ts:40:35
```

# Test source

```ts
   1 | import test, { expect, request } from "@playwright/test";
   2 | import { EmployerApiClient } from "../../apis/EmployerApiClient";
   3 | import { LoginApiClient } from "../../apis/LoginApiClient";
   4 | import { login } from "../../mock-apis/src/auth/login";
   5 |
   6 |
   7 | test.describe("Employer API Tests", () => {
   8 |     let employerApiClient: EmployerApiClient;
   9 |
  10 |     test.beforeEach(async ({ request }) => {
  11 |         const loginApiClient = new LoginApiClient(request, 'http://localhost:3001');
  12 |         const response = await loginApiClient.login('admin', 'admin');
  13 |         expect(response.status()).toBe(200);
  14 |         const data = await response.json();
  15 |         employerApiClient = new EmployerApiClient(request, 'http://localhost:3001', data.token);
  16 |     });
  17 |
  18 |     test.afterEach(async () => {
  19 |         // Cleanup logic if needed, e.g., deleting test data
  20 |     });
  21 |
  22 |     test("should fetch all employers", async ({request}) => {
  23 |         const response = await employerApiClient.getAllEmployers();
  24 |         expect(response.status()).toBe(200);
  25 |         const data = await response.json();
  26 |         expect(Array.isArray(data)).toBe(true);
  27 |     });
  28 |
  29 |     test("should create a new employer", async () => {
  30 |         const newEmployer = { name: "Test Employer"};
  31 |         const response = await employerApiClient.createEmployer(newEmployer);
  32 |         expect(response.status()).toBe(201);
  33 |         const data = await response.json();
  34 |         expect(data.name).toBe(newEmployer.name);
  35 |     });
  36 |
  37 |     test("should update an existing employer", async () => {
  38 |         const updatedEmployer = { name: "Updated Employer"};
  39 |         const response = await employerApiClient.updateEmployer(1, updatedEmployer);
> 40 |         expect(response.status()).toBe(200);
     |                                   ^ Error: expect(received).toBe(expected) // Object.is equality
  41 |         const data = await response.json();
  42 |         expect(data.name).toBe(updatedEmployer.name);
  43 |     });
  44 |
  45 |     test("should delete an employer by ID", async () => {
  46 |         const response = await employerApiClient.deleteEmployerById(2);
  47 |         expect(response.status()).toBe(200); // No Content
  48 |     });
  49 |
  50 |     test("should fetch an employer by ID", async () => {
  51 |         const response = await employerApiClient.getEmployerById(3);
  52 |         expect(response.status()).toBe(200);
  53 |         const data = await response.json();
  54 |         expect(data.id).toBe(3);
  55 |     });
  56 | });
```